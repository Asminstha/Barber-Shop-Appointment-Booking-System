{% extends 'base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto mt-10">

    <div class="mb-10 text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-2">
            Welcome, {{ user.username }} üëã
        </h1>
        <p class="text-gray-600">
            Manage your barber appointments easily !
        </p>
    </div>

    <div class="grid md:grid-cols-3 gap-6 mb-12">

        <a href="{% url 'appointment_list' %}" class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <h3 class="text-xl font-semibold mb-2">üìã My Appointments</h3>
            <p class="text-gray-600 text-sm">
                View, update, or cancel your appointments.
            </p>
        </a>
        <a href="{% url 'appointment_create' %}"
            class="bg-black text-white p-6 rounded-xl shadow hover:bg-gray-800 transition">
            <h3 class="text-xl font-semibold mb-2">‚ûï Book Appointment</h3>
            <p class="text-gray-300 text-sm">
                Schedule a new haircut or grooming service.
            </p>
        </a>



        <a href="{% url 'appointments_pdf' %}" class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <h3 class="text-xl font-semibold mb-2">üìÑ Download PDF</h3>
            <p class="text-gray-600 text-sm">
                Export all your appointments as PDF.
            </p>
        </a>
    </div>

    <!-- Upcoming Appointments -->
    <div class="bg-white rounded-xl shadow p-6">
        <h2 class="text-2xl font-semibold mb-4">Upcoming Appointments</h2>

        {% if upcoming_appointments %}
        <div class="overflow-x-auto">
            <table class="w-full border-collapse">
                <thead>
                    <tr class="bg-gray-200 text-left">
                        <th class="border px-4 py-2">Customer Name</th>
                        <th class="border px-4 py-2">Phone</th>
                        <th class="border px-4 py-2">Service</th>
                        <th class="border px-4 py-2">üìÖDate</th>
                        <th class="border px-4 py-2">‚è∞Time</th>
                        <th class="border px-4 py-2">Notes</th>
                        <th class="border px-4 py-2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appointment in upcoming_appointments %}
                    <tr class="border-t">
                        <td class="border px-4 py-2">{{ appointment.customer_name }}</td>
                        <td class="border px-4 py-2">{{ appointment.phone }}</td>
                        <td class="border px-4 py-2">{{ appointment.service }}</td>
                        <td class="border px-4 py-2">{{ appointment.date }}</td>
                        <td class="border px-4 py-2">{{ appointment.time }}</td>
                        <td class="border px-4 py-2">{{ appointment.notes }}</td>
                        <td class="border px-4 py-3">
                            <a href="{% url 'appointment_update' appointment.id %}"
                                class="text-blue-600 hover:underline text-sm">
                                Edit
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="text-gray-500">
            No upcoming appointments found.
        </p>
        {% endif %}
    </div>

</div>
{% endblock %}